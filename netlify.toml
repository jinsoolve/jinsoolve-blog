[build]
  command = "yarn build"
  publish = "public"

  [build.environment]
    # 빌드 안정화(메모리 절감용): 필요 시 유지
    NODE_OPTIONS = "--max-old-space-size=6144"
    GATSBY_EXCLUDE_SOURCE_MAPS = "true"
    GATSBY_CPU_COUNT = "2"
    SHARP_CONCURRENCY = "2"
    GATSBY_TELEMETRY_DISABLED = "1"

    # 🔑 핵심: Gatsby Functions/SSR/DSG 생성을 전부 스킵
    NETLIFY_SKIP_GATSBY_FUNCTIONS = "true"

[[redirects]]
  from = "https://jinsoolve.netlify.app/*"
  to = "https://jinsoolve.com/:splat"
  status = 301
  force = true

# (선택) Gatsby 캐시 최적화 플러그인
[[plugins]]
  package = "@netlify/plugin-gatsby"