"use strict";(self.webpackChunkjinsoolve_blog=self.webpackChunkjinsoolve_blog||[]).push([[1169],{88749:function(e,t,n){n.r(t),n.d(t,{Head:function(){return T},default:function(){return A}});var a=n(28453),l=n(96540);function r(e){const t=Object.assign({p:"p",h1:"h1",a:"a",span:"span",img:"img",br:"br",h2:"h2",h3:"h3",math:"math",semantics:"semantics",mrow:"mrow",mo:"mo",mi:"mi",annotation:"annotation",ol:"ol",li:"li",msqrt:"msqrt",mfrac:"mfrac",svg:"svg",path:"path",ul:"ul",strong:"strong",hr:"hr"},(0,a.RP)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"Seq2Seq에서 RNN을 아예 빼버리고 attention으로 구성해보면 어떨까? → Transformer의 구조"),"\n",l.createElement(t.h1,{id:"my-heading-1"},"Self-Attention",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-1"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/7Q1srIQ.png",alt:""}),"\n",l.createElement(t.p,null,"전에 seq2seq에서 decoder의 query와 encoder의 key/value를 보았다면",l.createElement(t.br),"\n","이젠 스스로의 query에서 스스로의 key/value를 보는 구조라고 생각하면 된다."),"\n",l.createElement(t.h2,{id:"my-heading-2"},"순서 문제",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-2"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"근데 여기서 문제가 이렇게 되면 글의 순서를 모른다는 점이다.",l.createElement(t.br),"\n","따라서 단어 벡터에다가 위치 정보를 더해 준다.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/5HZaAow.png",alt:""})),"\n",l.createElement(t.p,null,"Position Representation은 여러 가지 방식이 있다."),"\n",l.createElement(t.h3,{id:"my-heading-3"},"Sinusoidal Position Representations",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-3"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/XC8zJQG.png",alt:""}),l.createElement(t.br),"\n","sin, cos 함수를 이용해서 주기적으로 반복해서 위치 정보를 만든다.",l.createElement(t.br),"\n","여기서 주기적이기 때문에, 값이 커져도 주기성으로 인해 해당 값에 대해서도 예상이 가능하다.(extrapolation)"),"\n",l.createElement(t.p,null,"하지만, 학습이 불가능하다보니 실제로 extrapolation이 잘 안 된다."),"\n",l.createElement(t.h3,{id:"my-heading-4"},"Learned absolute position represtations",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-4"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"말 그대로 p 벡터를 학습 가능한 파라미터로써, 학습시켜서 값을 얻겠다는 생각이다."),"\n",l.createElement(t.p,null,"학습 가능하다보니, 유연하다. 하지만 주기성이 없어서 extrapolate할 수 없다. 범위를 나가버리면 정의할 수 없다."),"\n",l.createElement(t.h3,{id:"my-heading-5"},"RoPE (Rotary Position Embedding)",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-5"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/kbtvX7Q.png",alt:""}),l.createElement(t.br),"\n","i와 j의 차이에만 집중하고 i, j 각각의 값은 신경 쓰지 않겠다는 방식이다."),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/DHIi8HN.png",alt:""}),l.createElement(t.br),"\n","내적은 회전시켜도 값이 그대로인 것을 이용해서 위치를 회전을 통해서 반영시키는 방식이다."),"\n",l.createElement(t.h2,{id:"my-heading-6"},"비선형성이 없는 문제",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-6"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/r8iy0cn.png",alt:""}),l.createElement(t.br),"\n","그냥 Feed-forward network(은닉층이 1개인 신경망, MLP(Multi-Layer Perceptron)) 을 넣어서 해결한다."),"\n",l.createElement(t.h2,{id:"my-heading-7"},"미래 못 본다...",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-7"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"언어 모델은 오른쪽 Context를 실제로 보지 못 하는데 이걸 어떻게 반영할 것이냐의 문제.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/XCxxGjZ.png",alt:""}),l.createElement(t.br),"\n","attention score를 ",l.createElement(t.span,{className:"math math-inline"},l.createElement(t.span,{className:"katex"},l.createElement(t.span,{className:"katex-mathml"},l.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(t.semantics,null,l.createElement(t.mrow,null,l.createElement(t.mo,null,"−"),l.createElement(t.mi,{mathvariant:"normal"},"∞")),l.createElement(t.annotation,{encoding:"application/x-tex"},"-\\infty")))),l.createElement(t.span,{className:"katex-html","aria-hidden":"true"},l.createElement(t.span,{className:"base"},l.createElement(t.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),l.createElement(t.span,{className:"mord"},"−"),l.createElement(t.span,{className:"mord"},"∞"))))),"로 설정하면 exp 했을 때 0이 되므로 해당 단어를 무시하게 된다.",l.createElement(t.br),"\n","이런 식으로 오른쪽 context의 단어를 무시하게 만든다."),"\n",l.createElement(t.h2,{id:"my-heading-8"},"개선된 최종 self-attention block",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-8"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/ja3v6Vw.png",alt:""}),"\n",l.createElement(t.h1,{id:"my-heading-9"},"Transformer",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-9"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"그래서 transformer는 어떻게 생겼는지를 보자."),"\n",l.createElement(t.h2,{id:"my-heading-10"},"Transformer Decoder",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-10"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"먼저 transformer의 decoder를 한 번 보자.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/j9Vymds.png",alt:""}),l.createElement(t.br),"\n","오른쪽이 transformer decoder, 왼쪽이 개선된 self-attention이다.",l.createElement(t.br),"\n","약 3가지 정도가 다르다."),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"multi-head attention을 썼다."),"\n",l.createElement(t.li,null,"Residual connection을 썼다"),"\n",l.createElement(t.li,null,"Normalization를 해 줬다."),"\n"),"\n",l.createElement(t.h3,{id:"my-heading-11"},"Multi-headed attention",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-11"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"head가 여러 개라는 것은 글을 여러 개의 관점으로 바라본다. 즉, 각자 집중해서 보는 게 다르다는 의미다."),"\n",l.createElement(t.img,{src:"https://i.imgur.com/EWnN27H.png",alt:""}),"\n",l.createElement(t.p,null,"이떄 각 head는 독립적으로 계산하고 계산 효율을 위해 기존 d 차원을 나눠써 쓰기만 하다보니 결과적으로 cost는 크게 변하지 않는다."),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/VrHYyhO.png",alt:""}),l.createElement(t.br),"\n","이런 식으로 덩어리만 나눈 것이 된다."),"\n",l.createElement(t.p,null,"이때 d가 커지면 dot product가 너무 켜지게 될 수 있다.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/5DYWsD8.png",alt:""}),l.createElement(t.br),"\n","dot product는 softmax의 입력인데, softmax 그래프 특징 상 입력값이 너무 크면 gradient가 0에 수렴한다. 따라서 업데이트가 잘 안 된다.",l.createElement(t.br),"\n","다르게 보면 결과가 마치 one-hot vector처럼 되어버려서 업데이트가 안 된다고도 생각해 볼 수 있다."),"\n",l.createElement(t.p,null,"이걸 해결하기 위해 ",l.createElement(t.span,{className:"math math-inline"},l.createElement(t.span,{className:"katex"},l.createElement(t.span,{className:"katex-mathml"},l.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(t.semantics,null,l.createElement(t.mrow,null,l.createElement(t.msqrt,null,l.createElement(t.mfrac,null,l.createElement(t.mi,null,"d"),l.createElement(t.mi,null,"h")))),l.createElement(t.annotation,{encoding:"application/x-tex"},"\\sqrt{ \\frac{d}{h} }")))),l.createElement(t.span,{className:"katex-html","aria-hidden":"true"},l.createElement(t.span,{className:"base"},l.createElement(t.span,{className:"strut",style:{height:"1.84em",verticalAlign:"-0.5874em"}}),l.createElement(t.span,{className:"mord sqrt"},l.createElement(t.span,{className:"vlist-t vlist-t2"},l.createElement(t.span,{className:"vlist-r"},l.createElement(t.span,{className:"vlist",style:{height:"1.2526em"}},l.createElement(t.span,{className:"svg-align",style:{top:"-3.8em"}},l.createElement(t.span,{className:"pstrut",style:{height:"3.8em"}}),l.createElement(t.span,{className:"mord",style:{paddingLeft:"1em"}},l.createElement(t.span,{className:"mord"},l.createElement(t.span,{className:"mopen nulldelimiter"}),l.createElement(t.span,{className:"mfrac"},l.createElement(t.span,{className:"vlist-t vlist-t2"},l.createElement(t.span,{className:"vlist-r"},l.createElement(t.span,{className:"vlist",style:{height:"0.8801em"}},l.createElement(t.span,{style:{top:"-2.655em"}},l.createElement(t.span,{className:"pstrut",style:{height:"3em"}}),l.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(t.span,{className:"mord mtight"},l.createElement(t.span,{className:"mord mathnormal mtight"},"h")))),l.createElement(t.span,{style:{top:"-3.23em"}},l.createElement(t.span,{className:"pstrut",style:{height:"3em"}}),l.createElement(t.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})),l.createElement(t.span,{style:{top:"-3.394em"}},l.createElement(t.span,{className:"pstrut",style:{height:"3em"}}),l.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(t.span,{className:"mord mtight"},l.createElement(t.span,{className:"mord mathnormal mtight"},"d"))))),l.createElement(t.span,{className:"vlist-s"},"​")),l.createElement(t.span,{className:"vlist-r"},l.createElement(t.span,{className:"vlist",style:{height:"0.345em"}},l.createElement(t.span))))),l.createElement(t.span,{className:"mclose nulldelimiter"})))),l.createElement(t.span,{style:{top:"-3.2126em"}},l.createElement(t.span,{className:"pstrut",style:{height:"3.8em"}}),l.createElement(t.span,{className:"hide-tail",style:{minWidth:"1.02em",height:"1.88em"}},l.createElement(t.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.88em",viewBox:"0 0 400000 1944",preserveAspectRatio:"xMinYMin slice"},l.createElement(t.path,{d:"M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z"}))))),l.createElement(t.span,{className:"vlist-s"},"​")),l.createElement(t.span,{className:"vlist-r"},l.createElement(t.span,{className:"vlist",style:{height:"0.5874em"}},l.createElement(t.span))))))))),"로 나눠준다."),"\n",l.createElement(t.h3,{id:"my-heading-12"},"Residual Connections",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-12"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/AFGBvob.png",alt:""}),l.createElement(t.br),"\n","이전 입력을 더해주면서 다음과 같은 효과를 지닌다.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/9MyjU3g.png",alt:""})),"\n",l.createElement(t.h3,{id:"my-heading-13"},"Layer Normalization",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-13"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,"정규화의 효과는 워낙 유명하다.",l.createElement(t.br),"\n","데이터를 안정화시켜 주기 때문에(너무 크거나 작은 걸 막아줌) 학습이 잘 된다."),"\n",l.createElement(t.h3,{id:"my-heading-14"},"Transformer Decoder의 구조",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-14"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/9Q6I50T.png",alt:""}),l.createElement(t.br),"\n","결론적으로 이런 식의 구조를 Transformer Decorder는 갖는다."),"\n",l.createElement(t.h2,{id:"my-heading-15"},"Transformer Encoder",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-15"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.p,null,l.createElement(t.img,{src:"https://i.imgur.com/TwiiDbA.png",alt:""}),l.createElement(t.br),"\n","Transformer Encoder는 사실 Transformer Decoder에서 masking 여부만 하지 않는 차이다."),"\n",l.createElement(t.p,null,"이때 Decoder에서는 앞뒤 문맥을 모두 확인하고 싶을 때, Encoder에게 정보를 참고해서 생성하게 된다."),"\n",l.createElement(t.h3,{id:"my-heading-16"},"Transformer Encoder-Decoder",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-16"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/KfH0oxe.png",alt:""}),"\n",l.createElement(t.p,null,"이런 식으로 Encoder는 bi-directional 하게 양방향의 context를 모두 알고 있고, Decoder는 uni-directional하게 생성하고 있다. 이때 decoder는 미래를 알 수 없어서 오른쪽 context를 모르고 있지만 encoder는 알고 있다. 따라서 encoder의 출력을 보고 decoder가 필요한 정보를 attend해서 갖고 온다.",l.createElement(t.br),"\n","위 decoder가 encoder에게서부터 갖고 오는 것을 Cross-Attention이라 한다."),"\n",l.createElement(t.h3,{id:"my-heading-17"},"Cross-attention",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-17"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/Ov5Gol4.png",alt:""}),"\n",l.createElement(t.p,null,"쉽게 말하면 디코더의 query가 encoder의 key / value를 차고해서 decoder 값을 출력하는 방식이라는 의미다."),"\n",l.createElement(t.h2,{id:"my-heading-18"},"Transformer의 한계",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-18"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.h3,{id:"my-heading-19"},"Self-Attention의 계산량",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-19"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"Self-attention"),"의 계산량이 ",l.createElement(t.strong,null,"sequence 길이의 제곱(𝑂(n²))")," 에 비례한다는 문제."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"RNN은 ",l.createElement(t.strong,null,"선형(𝑂(n))")," 이라서 긴 문장 처리에 유리한데, Transformer는 길어질수록 계산량이 급증한다.",l.createElement(t.br),"\n",l.createElement(t.img,{src:"https://i.imgur.com/WKdOmCx.png",alt:""})),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"Attention을 할 때는 ",l.createElement(t.strong,null,"모든 토큰쌍")," (query-key)을 계산해야 해서,"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"계산량이 𝑂(n²d) (n: 시퀀스 길이, d: hidden 차원)이다."),"\n"),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"예를 들면 n=30이면 900번 계산이지만,"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"n=512, 혹은 n=50,000이 되면 계산량이 엄청나게 커진다."),"\n"),"\n"),"\n"),"\n",l.createElement(t.h3,{id:"my-heading-20"},"Pre-Norm vs Post-Norm",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-20"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/6bSUqDt.png",alt:""}),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,l.createElement(t.strong,null,"Layer Normalization"),"을 ",l.createElement(t.strong,null,"Self-Attention 앞에 넣느냐(Pre-Norm)"),", ",l.createElement(t.strong,null,"뒤에 넣느냐(Post-Norm)")," 에 따라 학습 안정성 차이가 난다."),"\n"),"\n",l.createElement(t.h3,{id:"my-heading-21"},"RNN의 부활",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-21"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.img,{src:"https://i.imgur.com/5iZuXfd.jpeg",alt:""}),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"긴 문맥(long context)이 필요할 때는 다시 RNN류 모델(RWKV, Mamba 등)이 뜨고 있다."),"\n",l.createElement(t.li,null,"왜냐하면 ",l.createElement(t.strong,null,"RNN은 𝑂(n)")," 만의 연산량으로 가능하기 때문."),"\n"),"\n",l.createElement(t.h2,{id:"my-heading-22"},"Transformer를 개선하기 위한 노력들...",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-22"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.h3,{id:"my-heading-23"},"Quadratic cost를 꼭 줄여야 할까?",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-23"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"실제 대규모 Transformer는 여전히 ",l.createElement(t.strong,null,"quadratic self-attention"),"을 쓴다."),"\n",l.createElement(t.li,null,"연산량 최적화 기법 (예: FlashAttention)이 등장했지만,"),"\n",l.createElement(t.li,null,"“Attention을 근본적으로 바꾸는 것”은 scaling up에 큰 도움은 못 준 경우가 많았다.","\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"즉, transformer 모델을 가볍게 하면 소규모에서는 괜찮은데 진짜 큰 모델에서는 원래 Transformer 구조가 더 잘 작동한다는 거다."),"\n"),"\n"),"\n"),"\n",l.createElement(t.h3,{id:"my-heading-24"},"Transformer 구조 변경이 효과 있을까?",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-24"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"결론: ",l.createElement(t.strong,null,"대부분 구조 변경은 성능을 “의미 있게” 올려주지 못했다"),"."),"\n",l.createElement(t.li,null,"Transformer 기본 구조 자체가 이미 매우 강력하다."),"\n"),"\n",l.createElement(t.h2,{id:"my-heading-25"},"정리",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-25"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.h3,{id:"my-heading-26"},"✅ 장점 (Advantages)",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-26"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"긴 거리(long-range) 의존성을 쉽게 잡는다")),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"Self-attention은 ",l.createElement(t.strong,null,"모든 단어 쌍")," 사이에 연결을 만든다."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"예를 들어, 첫 번째 단어랑 100번째 단어 사이 관계도 바로 연결할 수 있어."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"RNN처럼 순서대로 거쳐야 하지 않으니까 ",l.createElement(t.strong,null,"멀리 떨어진 관계"),"도 ",l.createElement(t.strong,null,"바로 포착 가능"),"."),"\n"),"\n"),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"병렬화가 쉽다 (Easier to parallelize)")),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"RNN은 시퀀스를 ",l.createElement(t.strong,null,"순서대로")," 처리해야 해서 한 번에 여러 작업을 못했어."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"Transformer는 ",l.createElement(t.strong,null,"모든 단어를 동시에")," 처리할 수 있어서,"),"\n",l.createElement(t.p,null,"→ GPU 같은 병렬 장비에서 ",l.createElement(t.strong,null,"엄청 빠르게 학습"),"할 수 있어."),"\n"),"\n"),"\n"),"\n"),"\n",l.createElement(t.hr),"\n",l.createElement(t.h3,{id:"my-heading-27"},"❗ 단점 (Drawbacks)",l.createElement(t.a,{"aria-hidden":"true",tabIndex:"-1",href:"#my-heading-27"},l.createElement(t.span,{className:"heading-anchor-icon"},"#"))),"\n",l.createElement(t.ol,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"위치 정보(Positional Information)를 충분히 담을 수 있나?")),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"기본 self-attention은 ",l.createElement(t.strong,null,"순서"),"를 고려하지 않고 “집합(set)“처럼 데이터를 본다."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"그래서 ",l.createElement(t.strong,null,"positional encoding"),"(위치 정보를 넣는 방법)이 꼭 필요하다."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"→ 만약 positional encoding이 약하면 ",l.createElement(t.strong,null,"문장의 순서"),"를 모델이 잘 이해 못할 수도 있음."),"\n"),"\n"),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,l.createElement(t.strong,null,"Self-attention은 계산량이 Quadratic (𝑂(n²))이다")),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"모든 단어 쌍을 비교해야 해서, 문장 길이(n)가 길어지면 ",l.createElement(t.strong,null,"n²만큼 계산량이 늘어남"),"."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"→ 문장이 길어지면 ",l.createElement(t.strong,null,"매우 느려진다"),"."),"\n"),"\n",l.createElement(t.li,null,"\n",l.createElement(t.p,null,"예를 들어, n이 10배 길어지면 연산량은 100배 늘어나는 거야."),"\n"),"\n"),"\n"),"\n"))}var m=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?l.createElement(t,e,l.createElement(r,e)):r(e)},c=n(54183),i=n(63840),o=n(67234),s=n(74196),d=n(33738),u=n(59146),E=n(32532),p=n(12931),h=n(92072),g=n(13626),f=n(39315),v=n(59879),x=n(68743),b=n(780),y=n(82228),N=n(66505),w=n(47722),k=n(55135),C=n(73992),I=n(80795);const S=e=>{var t,n,a,r,m,E;let{children:I,data:S,pageContext:T}=e;const A=S.otherLocalePost.nodes.map((e=>{var t;return(null===(t=e.frontmatter)||void 0===t?void 0:t.locale)||"ko"})),{0:R,1:z}=(0,l.useState)(!1),L=(0,l.useRef)(null),M=(null===(t=S.post)||void 0===t||null===(n=t.frontmatter)||void 0===n?void 0:n.locale)||"ko",D=null===(a=S.post)||void 0===a||null===(r=a.frontmatter)||void 0===r?void 0:r.slug,_=(0,c.A)({base:!1,"1.75xl":!0}),{0:P,1:j}=((0,c.A)({base:"6",md:"8"}),(0,l.useState)(!1)),W=(0,l.useRef)(null),{0:q,1:H}=(0,l.useState)(300),{colorMode:G}=(0,i.G6)();return(0,l.useEffect)((()=>{const e=()=>{z(window.innerWidth<630)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,l.useEffect)((()=>{const e=e=>{(W.current&&!W.current.contains(e.target)||L.current&&!L.current.contains(e.target))&&j(!1)};return P&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[P]),(0,l.useEffect)((()=>{const e=e=>{if(!W.current)return;const t=W.current;if(t.contains(e.target)){const n=0===t.scrollTop,a=Math.ceil(t.scrollTop+t.clientHeight)>=t.scrollHeight;(n&&e.deltaY<0||a&&e.deltaY>0)&&e.preventDefault()}},t=e=>{if(!W.current)return;const t=W.current;if(t.contains(e.target)){const n=0===t.scrollTop,a=Math.ceil(t.scrollTop+t.clientHeight)>=t.scrollHeight;(n&&e.touches[0].clientY>0||a&&e.touches[0].clientY<0)&&e.preventDefault()}};return P&&(document.addEventListener("wheel",e,{passive:!1}),document.addEventListener("touchmove",t,{passive:!1})),()=>{document.removeEventListener("wheel",e),document.removeEventListener("touchmove",t)}}),[P]),l.createElement(N.A,{tableOfContents:_?null===(m=S.post)||void 0===m?void 0:m.myTableOfContents:void 0},l.createElement(o.s,{direction:"column",width:"100%"},l.createElement(y.A,{readingTime:T.readingTime.text,post:S.post}),!_&&(null===(E=S.post)||void 0===E?void 0:E.myTableOfContents)&&l.createElement(l.Fragment,null,l.createElement(f.P.div,{initial:{right:"0px"},animate:{right:"0px"},transition:{duration:.3},style:{position:"fixed",bottom:R?"40px":"70px",transform:"translateY(-50%)",zIndex:10}},l.createElement(s.K,{"aria-label":"Toggle TOC",borderRadius:"full",size:"lg",right:{base:"12px",sm:"15px",md:"30px"},onClick:()=>j(!P),variant:"ghost",_hover:{bg:"transparent",color:"blue.400"},_focus:{boxShadow:"none",bg:"transparent"},display:P?"none":"block",icon:l.createElement(o.s,{alignItems:"center",justifyContent:"center"},P?l.createElement(l.Fragment,null,l.createElement(p.v,{boxSize:"20px",ml:-1}),l.createElement(d.I,{as:v.hCN,boxSize:"24px",ml:-1})," "):l.createElement(l.Fragment,null,l.createElement(h.Y,{boxSize:"20px",ml:-1}),l.createElement(d.I,{as:v.hCN,boxSize:"24px",ml:-1})," "))})),l.createElement(f.P.div,{initial:{right:"-300px"},animate:{right:P?"0px":"-300px"},transition:{duration:.3},ref:W,style:{position:"fixed",top:0,height:"100vh",width:"300px",maxWidth:"80vw",zIndex:10,overflowY:"auto",overflowX:"hidden"}},l.createElement(u.a,{backgroundColor:"white",boxShadow:"md",position:"relative",height:"100%",width:"300px",_dark:{backgroundColor:"gray.800"}},l.createElement(s.K,{"aria-label":"Close TOC",icon:l.createElement(g.U,null),position:"absolute",top:"10px",right:"10px",onClick:()=>j(!1),size:"sm",backgroundColor:"transparent",color:"black",_dark:{color:"white"}}),l.createElement(u.a,{pt:"60px",pb:"20px",pl:"20px",width:"300px",backgroundColor:"white",_dark:{backgroundColor:"gray.800"}},l.createElement(C.A,{tableOfContents:S.post.myTableOfContents}))))),A.length>1&&l.createElement(b.A,{currentSlug:D,locales:A,currentLocale:M}),l.createElement(u.a,{marginTop:"40px",sx:{img:{borderRadius:"10px"}}},I),l.createElement(k.A,{relatedPosts:S.relatedPosts}),l.createElement(w.A,null),l.createElement(x.A,null)))},T=e=>{var t,n,a,r,m,c,i,o,s,d,u,p,h,g,f,v,x,b,y,N,w;let{data:k}=e;const C=(null===(t=k.post)||void 0===t||null===(n=t.frontmatter)||void 0===n?void 0:n.locale)||"ko",S="ko"===C?(null===(a=k.post)||void 0===a||null===(r=a.frontmatter)||void 0===r?void 0:r.title)+" - Jinsoolve 블로그":(null===(m=k.post)||void 0===m||null===(c=m.frontmatter)||void 0===c?void 0:c.title)+" - Jinsoolve Blog",T=null===(i=k.post)||void 0===i||null===(o=i.frontmatter)||void 0===o?void 0:o.description,A=null===(s=k.post)||void 0===s||null===(d=s.frontmatter)||void 0===d||null===(u=d.thumbnail)||void 0===u||null===(p=u.childImageSharp)||void 0===p?void 0:p.gatsbyImageData,R="ko"===C?"ko_KR":"en_US",z="ko"===C?"개발":"Development";return l.createElement(l.Fragment,null,l.createElement("title",null,S),l.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),l.createElement("meta",{property:"og:url",content:I.V2+"/posts/"+(null===(h=k.post)||void 0===h||null===(g=h.frontmatter)||void 0===g?void 0:g.slug)}),l.createElement("meta",{property:"og:type",content:"website"}),l.createElement("meta",{property:"og:site_name",content:S}),l.createElement("meta",{property:"og:title",content:S}),l.createElement("meta",{property:"og:description",content:T}),l.createElement("meta",{property:"og:image",content:(0,E.d)(A)}),l.createElement("meta",{property:"og:locale",content:R}),l.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),l.createElement("meta",{property:"twitter:domain",content:"jinsoolve.netlify.app"}),l.createElement("meta",{property:"twitter:url",content:I.V2+"/posts/"+(null===(f=k.post)||void 0===f||null===(v=f.frontmatter)||void 0===v?void 0:v.slug)}),l.createElement("meta",{name:"twitter:title",content:S}),l.createElement("meta",{name:"twitter:description",content:T}),l.createElement("meta",{name:"twitter:image",content:(0,E.d)(A)}),l.createElement("meta",{name:"twitter:label1",content:"Category"}),l.createElement("meta",{name:"twitter:data1",content:z+" | "+(null===(x=k.post)||void 0===x||null===(b=x.frontmatter)||void 0===b?void 0:b.categories[0])}),l.createElement("meta",{name:"article:published_time",content:(null===(y=k.post)||void 0===y||null===(N=y.frontmatter)||void 0===N||null===(w=N.createdAt)||void 0===w?void 0:w.replace(/[/]/g,"-"))+"T09:00:00.000Z"}))};function A(e){return l.createElement(S,e,l.createElement(m,e))}},780:function(e,t,n){var a=n(67234),l=n(21052),r=n(58693),m=n(96540);t.A=e=>{let{currentLocale:t,locales:n,currentSlug:c}=e;return m.createElement(a.s,{alignItems:"center",marginTop:10,gap:2},m.createElement(l.E,{fontSize:16,fontWeight:"800",color:"black.900"},"Locales:"),m.createElement(a.s,{overflow:"hidden",width:"100%",gap:2,fontSize:12},n.map((e=>{const n="ko"===e?"/posts/"+c:"/"+e+"/posts/"+c;return e===t?m.createElement(l.E,{key:e,fontSize:16,fontWeight:"600",textDecoration:"underline",color:"black.900"},e):m.createElement(r.Link,{key:e,to:n},m.createElement(l.E,{fontSize:16,color:"black.900"},e))}))))}},95841:function(e,t,n){var a=n(59146),l=n(67234),r=n(85353),m=n(21052),c=n(58693),i=n(32532),o=n(96540),s=n(63840),d=n(96540);t.A=e=>{let{createdAt:t,description:n,slug:u,thumbnail:E,title:p,updatedAt:h,excerpt:g}=e;const f=(0,o.useMemo)((()=>(new Date).getTime()-new Date(t).getTime()),[t]),v=(0,o.useMemo)((()=>Math.floor(f/864e5)<=10),[f]),x=(0,s.dU)("gray.50","#444548"),b=(0,s.dU)("blue.500","blue.400"),y=((0,s.dU)("0 4px 6px rgba(0, 0, 0, 0.3)","0 4px 6px rgba(255, 255, 255, 0.3)"),(0,o.useMemo)((()=>E?"380px":{base:"190px",sm_md:"380px"}),[E]));return d.createElement(c.Link,{to:"/posts/"+u},d.createElement(a.a,{as:"article",transition:"all 0.25s ease",position:"relative",borderRadius:"20px",overflow:"hidden",width:{base:"280px",sm_md:"290px"},minWidth:"205px",maxWidth:"85vw",minHeight:y,height:"100%",boxShadow:"xl",borderWidth:"2px",borderColor:x,_hover:{borderColor:b,boxShadow:"xl",cursor:"pointer"}},d.createElement(i.G,{objectFit:"cover",style:{maxHeight:"171px",height:"45%",width:"100%"},image:E,alt:u+" cover image"}),d.createElement(l.s,{flexDirection:"column",justifyContent:"space-between",height:E?"55%":"100%",padding:"20px"},d.createElement(a.a,null,d.createElement(r.D,{fontSize:"20px",fontWeight:"700",marginBottom:"8px"},p),d.createElement(m.E,{fontSize:"16px",color:"gray.600",noOfLines:2,marginBottom:"10px"},n||g)),d.createElement(l.s,{justifyContent:"space-between",alignItems:"flex-start",marginTop:"10px"},d.createElement(m.E,{fontSize:"14px",color:"gray.500"},h?h+" (updated)":t),d.createElement(a.a,{backgroundColor:"blue.400",color:"white",borderRadius:"12px",padding:"4px 8px",fontSize:"12px",fontWeight:"bold",visibility:v?"visible":"hidden"},"NEW POST")))))}},55135:function(e,t,n){var a=n(63840),l=n(59146),r=n(85353),m=n(32818),c=n(75828),i=n(9e4),o=n(33738),s=n(58693),d=n(12931),u=n(95841),E=n(96540);t.A=e=>{let{relatedPosts:t}=e;const n=null==t?void 0:t.nodes.length,p=null==t?void 0:t.nodes.slice(0,4),h=((0,a.dU)("white","black"),(0,a.dU)("gray.50","#444548")),g=(0,a.dU)("blue.500","blue.400");return E.createElement(l.a,{marginTop:"200px"},n?E.createElement(r.D,{as:"h2",fontSize:24},"관련 포스트가 ",n,"개 있어요."):E.createElement(m.o,{height:"100px",borderRadius:"8px",backgroundColor:"blue.50"},E.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},E.createElement("path",{d:"M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm-.004 8.25a1 1 0 0 0-.992.885l-.007.116.003 5.502.007.117a1 1 0 0 0 1.987-.002L13 16.75l-.003-5.501-.007-.117a1 1 0 0 0-.994-.882ZM12 6.5a1.251 1.251 0 1 0 0 2.503A1.251 1.251 0 0 0 12 6.5Z",fill:"#3182ce"})),E.createElement(r.D,{as:"h2",color:"blue.500",fontSize:20},"관련 포스트가 없어요.")),E.createElement(c.x,{mt:"20px",templateColumns:{sm_md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)"},gap:6,alignItems:"center",justifyContent:"center"},null==p?void 0:p.map((e=>{var t,n,a,l,r,m,c,o,s,d;return E.createElement(i.E,{as:"article",key:null==e||null===(t=e.frontmatter)||void 0===t?void 0:t.slug,display:"flex",alignItems:"center",justifyContent:"center"},E.createElement(u.A,{title:null===(n=e.frontmatter)||void 0===n?void 0:n.title,description:null===(a=e.frontmatter)||void 0===a?void 0:a.description,slug:null===(l=e.frontmatter)||void 0===l?void 0:l.slug,thumbnail:null===(r=e.frontmatter)||void 0===r||null===(m=r.thumbnail)||void 0===m||null===(c=m.childImageSharp)||void 0===c?void 0:c.gatsbyImageData,createdAt:null===(o=e.frontmatter)||void 0===o?void 0:o.createdAt,updatedAt:null===(s=e.frontmatter)||void 0===s?void 0:s.updatedAt,categories:null===(d=e.frontmatter)||void 0===d?void 0:d.categories,excerpt:e.excerpt}))}))),n>6&&E.createElement(m.o,{mt:"20px"},E.createElement(s.Link,{to:"/categories/"+t.nodes[0].frontmatter.categories[0]},E.createElement(l.a,{as:"button",mt:"20px",transition:"all 0.25s ease",padding:"10px 20px",borderRadius:"12px",fontWeight:"bold",boxShadow:"xl",borderWidth:"2px",borderColor:h,_hover:{borderColor:g,boxShadow:"xl",cursor:"pointer"},display:"flex",alignItems:"center"},"더 많은 관련 포스트 보러가기",E.createElement(o.I,{as:d.v,ml:2,w:5,h:5})))))}},92072:function(e,t,n){n.d(t,{Y:function(){return a}});const a=(0,n(37513).w)({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"})},12931:function(e,t,n){n.d(t,{v:function(){return a}});const a=(0,n(37513).w)({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"})},9e4:function(e,t,n){n.d(t,{E:function(){return o}});var a=n(74848),l=n(77341),r=n(5090),m=n(12600),c=n(53785);function i(e){return(0,l.bk)(e,(e=>"auto"===e?"auto":`span ${e}/span ${e}`))}const o=(0,m.R)((function(e,t){const{area:n,colSpan:l,colStart:m,colEnd:o,rowEnd:s,rowSpan:d,rowStart:u,...E}=e,p=(0,r.o)({gridArea:n,gridColumn:i(l),gridRow:i(d),gridColumnStart:m,gridColumnEnd:o,gridRowStart:u,gridRowEnd:s});return(0,a.jsx)(c.B.div,{ref:t,__css:p,...E})}));o.displayName="GridItem"},75828:function(e,t,n){n.d(t,{x:function(){return m}});var a=n(74848),l=n(12600),r=n(53785);const m=(0,l.R)((function(e,t){const{templateAreas:n,gap:l,rowGap:m,columnGap:c,column:i,row:o,autoFlow:s,autoRows:d,templateRows:u,autoColumns:E,templateColumns:p,...h}=e,g={display:"grid",gridTemplateAreas:n,gridGap:l,gridRowGap:m,gridColumnGap:c,gridAutoColumns:E,gridColumn:i,gridRow:o,gridAutoFlow:s,gridAutoRows:d,gridTemplateRows:u,gridTemplateColumns:p};return(0,a.jsx)(r.B.div,{ref:t,__css:g,...h})}));m.displayName="Grid"}}]);
//# sourceMappingURL=component---src-templates-post-page-tsx-content-file-path-users-jinsoo-git-jinsoolve-blog-content-ml-intro-to-nlp-10-untitled-md-98a29590c53b2a2ebc18.js.map